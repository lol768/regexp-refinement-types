{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"jQuery\"","webpack:///external \"_\"","webpack:///external \"Modernizr\"","webpack:///./node_modules/panelsnap/lib/panelsnap.umd.js","webpack:///./js/change-location-hash.js","webpack:///./js/external-homepage/homepage-carousel.jquery.js","webpack:///./js/external-homepage/more-links-popover.jquery.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","jQuery","_","Modernizr","e","length","configurable","writable","arguments","TypeError","this","duration","ease","easing","_defaultEase","start","end","frame","next","isRunning","events","direction","window","requestAnimationFrame","_tick","cancelAnimationFrame","timeStart","push","forEach","timeElapsed","Math","round","_shouldTick","emit","up","down","document","body","scrollingElement","navigator","userAgent","indexOf","documentElement","top","left","bottom","innerHeight","right","innerWidth","height","width","getBoundingClientRect","a","addEventListener","removeEventListener","h","container","panelSelector","directionThreshold","delay","options","keys","getOwnPropertySymbols","concat","filter","getOwnPropertyDescriptor","dataset","panelsnapId","Error","scrollContainer","scrollEventContainer","instanceIndex","panelList","Array","from","querySelectorAll","isEnabled","isInteracting","scrollTimeout","resetAnimation","onInteractStart","passive","onInteractStop","onScroll","onInteract","findSnapTarget","isArray","iterator","toString","activePanel","stopAnimation","clearTimeout","animation","setTimeout","scrollTop","currentScrollOffset","scrollLeft","abs","snapToPanel","activatePanel","stop","targetScrollOffset","u","f","on","animationTick","begin","changeLocationHash","hash","history","replaceState","location","Config","PanelsCSSTemplate","escape","colour_r","colour_g","colour_b","colour","NavCSSTemplate","map","panels","panel","id","lighter_colour","join","Defaults","menu","logo","menuSelector","defaultImageFocalPoint","defaultImageScaling","showFullpageImageCarouselTest","mq","flexbox","hue2rgb","q","rawT","HomepageCarousel","_classCallCheck","$","extend","$container","applyPanelStyles","find","first","data","onScreenResize","wireEventHandlers","isOnLoad","isDesktop","hashChanged","off","scrollY","outerHeight","scrollBy","parseInt","substring","g","b","text","is","attr","proxy","disable","enable","lastIsDesktop","initPanelSnap","initMenu","initBackgroundImages","initIframes","initBackgroundColours","initHashChangeListener","initCaptionIcons","initScrollWatcher","resizeIframes","panelSnap","PanelSnap","onChangePanel","onChangePanelComplete","$target","stopPropagation","preventDefault","offset","$menu","$logo","scrollspy","target","smoothScrollToTarget","animate","$navStyles","panelColours","each","componentToHex","hex","$panel","hsl","red","green","blue","max","min","hue","saturation","lightness","rgbToHsl","lighterRGB","hslToRgb","css","$content","position","scaling","background-image","background-position","background-size","prepend","addClass","append","src","frameborder","prop","remove","panelWidth","panelHeight","targetAspectRatio","ceil","$caption","$icon","alt","$iconLink","cloneNode","fixedHeight","beforeScroll","last","fn","homepageCarousel","undefined","element","template","trim","MoreLinksPopover","more_links_popover_jquery_classCallCheck","$trigger","trigger","popover","content","html","placement","title","closest","moreLinksPopover"],"mappings":"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","file":"external-homepage/js/hp.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/static\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n","module.exports = jQuery;","module.exports = _;","module.exports = Modernizr;","/**\n * PanelSnap.js v1.2.1\n * Copyright (c) 2013-present, Guido Bouman\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n!function(t,n){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=n():\"function\"==typeof define&&define.amd?define(n):t.PanelSnap=n()}(this,function(){\"use strict\";function t(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function e(t){return function(t){if(Array.isArray(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||\"[object Arguments]\"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance\")}()}var i=function(){function t(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(n,e,i){return e&&t(n.prototype,e),i&&t(n,i),n}}();var o=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,n){if(!(t instanceof n))throw new TypeError(\"Cannot call a class as a function\")}(this,t),this.duration=n.duration||1e3,this.ease=n.easing||this._defaultEase,this.start=n.start,this.end=n.end,this.frame=null,this.next=null,this.isRunning=!1,this.events={},this.direction=this.start<this.end?\"up\":\"down\"}return i(t,[{key:\"begin\",value:function(){return this.isRunning||this.next===this.end||(this.frame=window.requestAnimationFrame(this._tick.bind(this))),this}},{key:\"stop\",value:function(){return window.cancelAnimationFrame(this.frame),this.isRunning=!1,this.frame=null,this.timeStart=null,this.next=null,this}},{key:\"on\",value:function(t,n){return this.events[t]=this.events[t]||[],this.events[t].push(n),this}},{key:\"emit\",value:function(t,n){var e=this,i=this.events[t];i&&i.forEach(function(t){return t.call(e,n)})}},{key:\"_tick\",value:function(t){this.isRunning=!0;var n=this.next||this.start;this.timeStart||(this.timeStart=t),this.timeElapsed=t-this.timeStart,this.next=Math.round(this.ease(this.timeElapsed,this.start,this.end-this.start,this.duration)),this._shouldTick(n)?(this.emit(\"tick\",this.next),this.frame=window.requestAnimationFrame(this._tick.bind(this))):(this.emit(\"tick\",this.end),this.emit(\"done\",null))}},{key:\"_shouldTick\",value:function(t){return{up:this.next<this.end&&t<=this.next,down:this.next>this.end&&t>=this.next}[this.direction]}},{key:\"_defaultEase\",value:function(t,n,e,i){return(t/=i/2)<1?e/2*t*t+n:-e/2*(--t*(t-2)-1)+n}}]),t}();function s(t){return t!==document.body?t:\"scrollingElement\"in document?document.scrollingElement:navigator.userAgent.indexOf(\"WebKit\")>-1?document.body:document.documentElement}function r(t){return t===document.body?{top:0,left:0,bottom:window.innerHeight,right:window.innerWidth,height:window.innerHeight,width:window.innerWidth}:t.getBoundingClientRect()}var a=function(){var t=!1;try{var n=Object.defineProperty({},\"passive\",{get:function(){t=!0}});window.addEventListener(\"test\",null,n),window.removeEventListener(\"test\",null,n)}catch(t){}return t}(),l=0,h={container:document.body,panelSelector:\"> section\",directionThreshold:50,delay:0,duration:300,easing:function(t){return t}};return function(){function i(t){if(function(t,n){if(!(t instanceof n))throw new TypeError(\"Cannot call a class as a function\")}(this,i),this.options=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},o=Object.keys(i);\"function\"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),o.forEach(function(e){n(t,e,i[e])})}return t}({},h,t),this.options.container.dataset.panelsnapId)throw new Error(\"PanelSnap is already initialised on this container, aborting.\");var e;this.container=this.options.container,this.scrollContainer=s(this.container),this.scrollEventContainer=(e=this.container)===document.body?window:s(e),l+=1,this.instanceIndex=l,this.container.dataset.panelsnapId=this.instanceIndex;var o='[data-panelsnap-id=\"'.concat(this.instanceIndex,'\"] ').concat(this.options.panelSelector);this.panelList=Array.from(document.querySelectorAll(o)),this.events=[],this.isEnabled=!0,this.isInteracting=!1,this.scrollTimeout=null,this.resetAnimation(),this.scrollEventContainer.addEventListener(\"keydown\",this.onInteractStart.bind(this),a&&{passive:!0}),this.scrollEventContainer.addEventListener(\"keyup\",this.onInteractStop.bind(this),a&&{passive:!0}),this.scrollEventContainer.addEventListener(\"mousedown\",this.onInteractStart.bind(this),a&&{passive:!0}),this.scrollEventContainer.addEventListener(\"mouseup\",this.onInteractStop.bind(this),a&&{passive:!0}),this.scrollEventContainer.addEventListener(\"touchstart\",this.onInteractStart.bind(this),a&&{passive:!0}),this.scrollEventContainer.addEventListener(\"touchend\",this.onInteractStop.bind(this),a&&{passive:!0}),this.scrollEventContainer.addEventListener(\"scroll\",this.onScroll.bind(this),a&&{passive:!0}),this.scrollEventContainer.addEventListener(\"wheel\",this.onInteract.bind(this),a&&{passive:!0}),this.findSnapTarget()}var c,u,f;return c=i,(u=[{key:\"enable\",value:function(){this.isEnabled=!0}},{key:\"disable\",value:function(){this.isEnabled=!1}},{key:\"on\",value:function(t,n){var i=this.events[t]||[];this.events[t]=e(i).concat([n]),\"activatePanel\"===t&&n.call(this,this.activePanel)}},{key:\"off\",value:function(t,n){var e=this.events[t]||[];this.events[t]=e.filter(function(t){return t!==n})}},{key:\"emit\",value:function(t,n){var e=this;(this.events[t]||[]).forEach(function(t){return t.call(e,n)})}},{key:\"onInteractStart\",value:function(){this.stopAnimation(),this.isInteracting=!0}},{key:\"onInteractStop\",value:function(){this.isInteracting=!1,this.findSnapTarget()}},{key:\"onInteract\",value:function(){this.stopAnimation(),this.onScroll()}},{key:\"onScroll\",value:function(){clearTimeout(this.scrollTimeout),this.isInteracting||this.animation||(this.scrollTimeout=setTimeout(this.findSnapTarget.bind(this),50+this.options.delay))}},{key:\"findSnapTarget\",value:function(){var t=this.scrollContainer.scrollTop-this.currentScrollOffset.top,n=this.scrollContainer.scrollLeft-this.currentScrollOffset.left;this.currentScrollOffset={top:this.scrollContainer.scrollTop,left:this.scrollContainer.scrollLeft};var e,i,o,s=(e=this.container,i=this.panelList,o=r(e),i.filter(function(t){var n=t.getBoundingClientRect();return n.top<o.bottom&&n.right>o.left&&n.bottom>o.top&&n.left<o.right}));if(0===s.length)throw new Error(\"PanelSnap could not find a snappable panel, aborting.\");if(s.length>1){if(Math.abs(t)<this.options.directionThreshold&&Math.abs(n)<this.options.directionThreshold&&this.activePanel)return void this.snapToPanel(this.activePanel,t>0,n>0);var a=t>0||n>0?1:s.length-2;this.snapToPanel(s[a],t<0,n<0)}else{var l=s[0];!function(t,n){var e=r(t),i=n.getBoundingClientRect();return i.top<=e.top&&i.bottom>=e.bottom&&i.left<=e.left&&i.right>=e.right}(this.container,l)?(console.error(\"PanelSnap does not support space between panels, snapping back.\"),this.snapToPanel(l,t>0,n>0)):this.activatePanel(l)}}},{key:\"snapToPanel\",value:function(t){var n=this,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.activatePanel(t),this.isEnabled&&(this.animation&&this.animation.stop(),this.targetScrollOffset=function(t,n){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=r(t),a=n.getBoundingClientRect(),l=a.top-o.top,h=a.left-o.left,c=e?a.height-o.height:0,u=i?a.width-o.width:0,f=s(t);return{top:l+c+f.scrollTop,left:h+u+f.scrollLeft}}(this.container,t,e,i),this.animation=new o({start:0,end:1e4,duration:this.options.duration}),this.animation.on(\"tick\",this.animationTick.bind(this)),this.animation.on(\"done\",function(){n.emit(\"snapStop\",t),n.resetAnimation()}),this.emit(\"snapStart\",t),this.animation.begin())}},{key:\"animationTick\",value:function(t){var n=this.targetScrollOffset.top-this.currentScrollOffset.top,e=this.currentScrollOffset.top+n*t/1e4;this.scrollContainer.scrollTop=e;var i=this.targetScrollOffset.left-this.currentScrollOffset.left,o=this.currentScrollOffset.left+i*t/1e4;this.scrollContainer.scrollLeft=o}},{key:\"stopAnimation\",value:function(){this.animation&&(this.animation.stop(),this.resetAnimation())}},{key:\"resetAnimation\",value:function(){this.currentScrollOffset={top:this.scrollContainer.scrollTop,left:this.scrollContainer.scrollLeft},this.targetScrollOffset={top:0,left:0},this.animation=null}},{key:\"activatePanel\",value:function(t){this.activePanel!==t&&(this.emit(\"activatePanel\",t),this.activePanel=t)}}])&&t(c.prototype,u),f&&t(c,f),i}()});\n","/* eslint-env browser */\nexport default function changeLocationHash(hash) {\n  if ('replaceState' in window.history) {\n    window.history.replaceState({}, null, hash);\n  } else {\n    window.location.hash = hash;\n  }\n}\n","/* eslint-env browser */\nimport $ from 'jquery';\nimport Modernizr from 'modernizr';\nimport _ from 'lodash-es';\nimport PanelSnap from 'panelsnap';\n\nimport changeLocationHash from '../change-location-hash';\n\nconst Config = {\n  /**\n   * @return {string}\n   */\n  PanelsCSSTemplate(o) {\n    return `body .id7-masthead .id7-search .fa {color: rgba(${_.escape(o.colour_r)}, ${_.escape(o.colour_g)}, ${_.escape(o.colour_b)}, 0.5);}\n      body .id7-masthead .id7-search .twitter-typeahead:hover + .fa {color: ${_.escape(o.colour)};}\n      body .id7-masthead .id7-search .twitter-typeahead .tt-suggestion.tt-cursor {background: ${_.escape(o.colour)};}\n      body .form-control:focus {border-color: ${_.escape(o.colour)}; -webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(${_.escape(o.colour_r)}, ${_.escape(o.colour_g)}, ${_.escape(o.colour_b)}, 0.6); box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(${_.escape(o.colour_r)}, ${_.escape(o.colour_g)}, ${_.escape(o.colour_b)}, 0.6);}\n      .id7-page-header {background: ${_.escape(o.colour)};}\n      .id7-masthead .id7-logo-row nav {opacity: 1; filter: alpha(opacity=100);}\n      .id7-masthead .id7-logo-row nav a {color: ${_.escape(o.colour)} !important;}`;\n  },\n  /**\n   * @return {string}\n   */\n  NavCSSTemplate(o) {\n    return _.map(o.panels, panel => `.carousel-nav a[href=\"#${_.escape(panel.id)}\"]:hover, .carousel-nav li.active a[href=\"#${_.escape(panel.id)}\"] {color: ${_.escape(panel.lighter_colour)};}`).join('');\n  },\n  Defaults: {\n    menu: '.carousel-nav',\n    logo: '.id7-logo a',\n    panels: '.jumbotron-carousel > article',\n    menuSelector: 'a',\n    animation: {\n      length: 300,\n      easing: 'swing',\n    },\n    defaultImageFocalPoint: 'center center',\n    defaultImageScaling: 'cover',\n    showFullpageImageCarouselTest() {\n      // As per ID-94, if a browser can't do Flexbox (and therefore can't do panel layouts),\n      // serve the mobile hp\n      return Modernizr.mq('only all and (min-width: 768px)') && Modernizr.flexbox;\n    },\n  },\n};\n\n/**\n * Converts an RGB color value to HSL. Conversion formula\n * adapted from http://en.wikipedia.org/wiki/HSL_color_space.\n * Assumes r, g, and b are contained in the set [0, 255] and\n * returns h, s, and l in the set [0, 1].\n *\n * @param   red: number       The red color value\n * @param   green: number       The green color value\n * @param   blue: number       The blue color value\n * @return  {saturation: number, lightness: number, hue: number}   The HSL representation\n */\nfunction rgbToHsl(red, green, blue) {\n  const r = red / 255;\n  const g = green / 255;\n  const b = blue / 255;\n\n  const max = Math.max(r, g, b);\n  const min = Math.min(r, g, b);\n\n  let h;\n  let s;\n  const l = (max + min) / 2;\n\n  if (max === min) {\n    h = 0;\n    s = 0; // achromatic\n  } else {\n    const d = max - min;\n    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n    switch (max) {\n      case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n      case g: h = (b - r) / d + 2; break;\n      case b: h = (r - g) / d + 4; break;\n      default: throw new Error();\n    }\n    h /= 6;\n  }\n\n  return {\n    hue: h,\n    saturation: s,\n    lightness: l,\n  };\n}\n\nfunction hue2rgb(p, q, rawT) {\n  let t = rawT;\n  if (t < 0) t += 1;\n  if (t > 1) t -= 1;\n  if (t < 1 / 6) return p + (q - p) * 6 * t;\n  if (t < 1 / 2) return q;\n  if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\n  return p;\n}\n\n/**\n * Converts an HSL color value to RGB. Conversion formula\n * adapted from http://en.wikipedia.org/wiki/HSL_color_space.\n * Assumes h, s, and l are contained in the set [0, 1] and\n * returns r, g, and b in the set [0, 255].\n *\n * @param   h: number       The hue\n * @param   s: number       The saturation\n * @param   l: number       The lightness\n * @return  {red: number, green: number, blue: number}           The RGB representation\n */\nfunction hslToRgb(h, s, l) {\n  let r;\n  let g;\n  let b;\n\n  if (s === 0) {\n    r = l;\n    g = l;\n    b = l; // achromatic\n  } else {\n    const q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n    const p = 2 * l - q;\n    r = hue2rgb(p, q, h + 1 / 3);\n    g = hue2rgb(p, q, h);\n    b = hue2rgb(p, q, h - 1 / 3);\n  }\n\n  return {\n    red: r * 255,\n    green: g * 255,\n    blue: b * 255,\n  };\n}\n\n/**\n * Display a megamenu popover\n */\nclass HomepageCarousel {\n  constructor(options) {\n    const o = $.extend({}, Config.Defaults, options);\n    this.$container = o.container;\n    this.options = o;\n\n    // Apply the colour from the first panel - on mobile, this is the only one ever applied\n    HomepageCarousel.applyPanelStyles(this.$container.find(`${this.options.panels}[data-colour]`).first().data('colour'));\n    this.onScreenResize();\n    this.wireEventHandlers();\n  }\n\n  wireEventHandlers() {\n    $(window).on('resize.id7.homepage', $.proxy(this.onScreenResize, this));\n\n    // ID-30 on load (i.e. after fonts have loaded) run this, forcing a resize\n    $(window).on('load', $.proxy(function onLoad(e) {\n      this.onScreenResize(e, true);\n    }, this));\n\n    const { $container } = this;\n\n    // When popovers are open, disable the panel snap\n    $(document.body)\n      .on('shown.bs.popover', () => {\n        if ($container.data('panelSnap')) {\n          $container.data('panelSnap').disable();\n        }\n      })\n      .on('hidden.bs.popover', () => {\n        if ($container.data('panelSnap')) {\n          $container.data('panelSnap').enable();\n        }\n      });\n  }\n\n  onScreenResize() {\n    const isOnLoad = (typeof this.lastIsDesktop === 'undefined');\n\n    // Which stop-point are we on?\n    const isDesktop = this.options.showFullpageImageCarouselTest();\n\n    // Don't re-init if we're not transitioning\n    if (isDesktop !== this.lastIsDesktop) {\n      this.initPanelSnap(isOnLoad, isDesktop);\n      this.initMenu(isOnLoad, isDesktop);\n      this.initBackgroundImages(isOnLoad, isDesktop);\n      this.initIframes(isOnLoad, isDesktop);\n      this.initBackgroundColours(isOnLoad, isDesktop);\n      HomepageCarousel.initHashChangeListener(isOnLoad, isDesktop);\n      this.initCaptionIcons(isOnLoad, isDesktop);\n      this.initScrollWatcher(isOnLoad, isDesktop);\n\n      this.lastIsDesktop = isDesktop;\n    }\n\n    // Warning: be careful about what events you're looking for here\n    this.resizeIframes(isOnLoad, isDesktop);\n  }\n\n  initPanelSnap(isOnLoad, isDesktop) {\n    const { $container, options } = this;\n\n    if ($container.data('panelSnap')) {\n      if (isDesktop) {\n        $container.data('panelSnap').enable();\n      } else {\n        $container.data('panelSnap').disable();\n      }\n    } else if (isDesktop) {\n      // First time init\n      const panelSnap = new PanelSnap({\n        container: $container.get()[0],\n        panelSelector: options.panels,\n        duration: options.animation.length,\n        easing: options.animation.easing,\n      });\n\n      panelSnap.on('activatePanel', HomepageCarousel.onChangePanel);\n      panelSnap.on('snapStart', HomepageCarousel.onChangePanel);\n      panelSnap.on('snapStop', HomepageCarousel.onChangePanelComplete);\n\n      $container.data('panelSnap', panelSnap);\n\n      $(options.menu).on('click', options.menuSelector, function snapToPanel(e) {\n        const $target = $($(this).attr('href'));\n        if ($target.length) {\n          e.stopPropagation();\n          e.preventDefault();\n\n          panelSnap.snapToPanel($target.get()[0]);\n        }\n      });\n    }\n\n    // Scroll to right panel on page load\n    if (isDesktop\n      && isOnLoad\n      && window.location.hash.length > 0\n      && $container.find(options.panels + window.location.hash).length\n    ) {\n      setTimeout(() => $('html, body').scrollTop($(window.location.hash).offset().top), 100);\n    }\n  }\n\n  initMenu(isOnLoad, isDesktop) {\n    const { $container, options } = this;\n\n    const $menu = $container.find(options.menu);\n    const $logo = $(options.logo);\n\n    $menu.find('a[href^=\"#\"]').off('click.id7.homepage');\n    $logo.off('click.id7.homepage');\n\n    // Link the logo to the first item in the menu\n    $logo.attr('href', $menu.find('a[href^=\"#\"]').first().attr('href'));\n\n    if (isDesktop) {\n      $container.scrollspy({ target: options.menu }); // Idempotent, safe to call multiple times\n\n      const smoothScrollToTarget = function smoothScrollToTarget(e) {\n        // prevent default anchor click behavior\n        e.preventDefault();\n\n        // store hash\n        const { hash } = this;\n        HomepageCarousel.onChangePanel($(hash));\n\n        // animate\n        $('html, body').animate({\n          scrollTop: $(hash).offset().top,\n        }, options.animation.length, () => {\n          if (!$('.megamenu-links.popover').is(':visible')) {\n            changeLocationHash(hash);\n          }\n        });\n      };\n\n      $menu.find('a[href^=\"#\"]').on('click.id7.homepage', smoothScrollToTarget);\n      $logo.on('click.id7.homepage', smoothScrollToTarget);\n\n      const $navStyles = $('#homepage-style-rules-nav');\n\n      if ($navStyles.is(':empty')) {\n        const panelColours = [];\n        $container.find(`${options.panels}[id][data-colour]`).each(function collatePanelColours() {\n          function componentToHex(c) {\n            const hex = Math.round(c).toString(16);\n            return hex.length === 1 ? `0${hex}` : hex;\n          }\n\n          function rgbToHex(r, g, b) {\n            return `#${componentToHex(r)}${componentToHex(g)}${componentToHex(b)}`;\n          }\n\n          const $panel = $(this);\n          const id = $panel.attr('id');\n          const colour = $panel.data('colour');\n\n          const r = parseInt(colour.substring(1, 3), 16);\n          const g = parseInt(colour.substring(3, 5), 16);\n          const b = parseInt(colour.substring(5, 7), 16);\n\n          const hsl = rgbToHsl(r, g, b);\n          const lighterRGB = hslToRgb(hsl.hue, hsl.saturation, 0.9);\n\n          panelColours.push({\n            id,\n            colour,\n            lighter_colour: rgbToHex(lighterRGB.red, lighterRGB.green, lighterRGB.blue),\n            colour_r: parseInt(colour.substring(1, 3), 16),\n            colour_g: parseInt(colour.substring(3, 5), 16),\n            colour_b: parseInt(colour.substring(5, 7), 16),\n          });\n        });\n\n        $navStyles.text(Config.NavCSSTemplate({\n          panels: panelColours,\n        }));\n      }\n    }\n  }\n\n  initBackgroundColours(isOnLoad, isDesktop) {\n    const { $container } = this;\n\n    // Init background colours\n    $container.find('[data-colour]').each(function setBackgroundColour() {\n      const $panel = $(this);\n      const colour = $panel.data('colour');\n      const red = parseInt(colour.substring(1, 3), 16);\n      const green = parseInt(colour.substring(3, 5), 16);\n      const blue = parseInt(colour.substring(5, 7), 16);\n\n      $panel.css('background-color', colour);\n      const $content = $panel.find('.caption-content');\n      $content.css('background-color', colour);\n\n      if (isDesktop) {\n        $content.css('background-color', `rgba(${red}, ${green}, ${blue}, 0.9)`);\n      }\n    });\n  }\n\n  initBackgroundImages(isOnLoad, isDesktop) {\n    const { $container, options } = this;\n\n    // Background images\n    if (isDesktop) {\n      $container.find('[data-image]').each(function setPanelBackground() {\n        const $panel = $(this);\n\n        $panel.css('background-image', `url(${$panel.data('image')})`);\n\n        const position = $panel.data('image-focal-point') || options.defaultImageFocalPoint;\n        $panel.css('background-position', position);\n\n        const scaling = $panel.data('image-scaling') || options.defaultImageScaling;\n        $panel.css('background-size', scaling);\n      });\n    } else {\n      $container.find('[data-image]').css({\n        'background-image': '',\n        'background-position': '',\n        'background-size': '',\n      });\n    }\n  }\n\n  initIframes(isOnLoad, isDesktop) {\n    const { $container } = this;\n\n    // Embedded content (mostly video)\n    if (isDesktop) {\n      $container.find('[data-iframe]').each(function embedVideo() {\n        const $panel = $(this);\n\n        if ($panel.find('> .iframe-container').length) return;\n\n        $panel.prepend(\n          $('<div />').addClass('iframe-container').append(\n            $('<iframe />')\n              .attr({\n                src: $panel.data('iframe'),\n                frameborder: 0,\n              })\n              .prop('allowfullscreen', true),\n          ),\n        );\n      });\n    } else {\n      $container.find('[data-iframe]').find('> .iframe-container').remove();\n    }\n  }\n\n  resizeIframes(isOnLoad, isDesktop) {\n    const { $container } = this;\n\n    if (isDesktop) {\n      $container.find('[data-iframe]').each(function resizeIframe() {\n        const $panel = $(this);\n        const panelWidth = $panel.width();\n        const panelHeight = $panel.height();\n\n        const aspectRatio = panelWidth / panelHeight;\n        const targetAspectRatio = 1920 / 1080;\n\n        let width;\n        let height;\n        if (aspectRatio > targetAspectRatio) {\n          width = panelWidth;\n          height = Math.ceil(panelWidth / targetAspectRatio);\n        } else {\n          height = panelHeight;\n          width = Math.ceil(panelHeight * targetAspectRatio);\n        }\n\n        $panel.find('> .iframe-container > iframe').attr({ width, height });\n      });\n    }\n  }\n\n  initCaptionIcons(isOnLoad, isDesktop) {\n    const { $container } = this;\n\n    if (!isDesktop) {\n      $container.find('[data-icon]').each(function initCaptionIcon() {\n        const $caption = $(this);\n\n        const $target = $caption;\n\n        const $icon = $('<img />').addClass('caption-icon').attr({\n          alt: $caption.find('h2').first().text(),\n          src: $caption.data('icon'),\n        });\n\n        if ($caption.find('a').length > 0) {\n          // Shallow clone\n          const $iconLink = $($caption.find('a')[0].cloneNode(false)).addClass('caption-icon-link');\n          $target.prepend($iconLink.append($icon));\n        } else {\n          $target.prepend($icon);\n        }\n      });\n    } else {\n      $container.find('[data-icon] .caption-icon-link').remove();\n      $container.find('[data-icon] .caption-icon').remove();\n    }\n  }\n\n  static initHashChangeListener(isOnLoad, isDesktop) {\n    // Handle in-page bookmarks.\n    if (isOnLoad && !isDesktop && window.location.hash) HomepageCarousel.hashChanged();\n    $(window).off('hashchange.id7.homepage');\n\n    if (!Modernizr.mq('only all and (min-width: 768px)')) {\n      $(window).on('hashchange.id7.homepage', HomepageCarousel.hashChanged);\n    }\n  }\n\n  static hashChanged() {\n    const scrollY = $('.id7-page-header').outerHeight();\n    setTimeout(() => window.scrollBy(0, -scrollY), 1);\n  }\n\n  initScrollWatcher(isOnLoad, isDesktop) {\n    $(window).off('scrollstop.id7.homepage');\n\n    if (!isDesktop) {\n      const { $container, options } = this;\n\n      const fixedHeight = $('.id7-page-header').outerHeight();\n\n      $(window).on('scrollstop.id7.homepage', () => {\n        const scrollY = fixedHeight + $(window).scrollTop();\n\n        const beforeScroll = $container.find(`${options.panels}[data-colour]:visible`).filter(function isAboveScroll() {\n          const $panel = $(this);\n          const offsetY = $panel.offset().top;\n\n          return offsetY <= scrollY;\n        });\n\n        if (beforeScroll.length === $container.find(`${options.panels}[data-colour]:visible`).length) {\n          // We've scrolled past all of them, use Warwick Aubergine\n          HomepageCarousel.applyPanelStyles('#5b3069');\n        } else {\n          const $panel = (beforeScroll.length > 0) ? beforeScroll.last() : $container.find(`${options.panels}[data-colour]:visible`).first();\n          HomepageCarousel.onChangePanel($panel);\n        }\n      });\n    }\n  }\n\n  static onChangePanel(panel) {\n    HomepageCarousel.applyPanelStyles($(panel).data('colour'));\n  }\n\n  static applyPanelStyles(colour) {\n    if (!colour) return;\n\n    const r = parseInt(colour.substring(1, 3), 16);\n    const g = parseInt(colour.substring(3, 5), 16);\n    const b = parseInt(colour.substring(5, 7), 16);\n\n    try {\n      $('#homepage-style-rules-panels').text(Config.PanelsCSSTemplate({\n        colour,\n        // brighter_colour: rgbToHex(r_brighter, g_brighter, b_brighter),\n        colour_r: r,\n        colour_g: g,\n        colour_b: b,\n      }));\n    } catch (e) {\n      // This fails on IE8. Just accept the default colours\n    }\n  }\n\n  static onChangePanelComplete(panel) {\n    // when done, add hash to url\n    // (default click behaviour)\n    // Only if the more links popover is not open\n    if (!$('.megamenu-links.popover').is(':visible')) {\n      changeLocationHash(`#${$(panel).attr('id')}`);\n    }\n  }\n}\n\n$.fn.homepageCarousel = function initPlugin(o = {}) {\n  function attach(i, element) {\n    const $container = $(element);\n    const homepageCarousel = new HomepageCarousel($.extend({}, $container.data(), o, {\n      container: $container,\n    }));\n\n    $container.data('id7.homepage-carousel', homepageCarousel);\n  }\n\n  return this.each(attach);\n};\n\n$(() => $('body').homepageCarousel());\n","/* eslint-env browser */\nimport $ from 'jquery';\nimport Modernizr from 'modernizr';\n\nimport changeLocationHash from '../change-location-hash';\n\nconst Config = {\n  Defaults: {\n    container: 'body', // Needed to avoid being drawn under the nav carousel which is fixed in the body\n    template: `\n      <div class=\"popover megamenu-links\">\n        <div class=\"arrow\"></div>\n        <div class=\"popover-inner\">\n          <div class=\"popover-content container-fluid\"></div>\n        </div>\n      </div>`.trim(),\n  },\n};\n\n/**\n * Display a megamenu popover\n */\nclass MoreLinksPopover {\n  constructor(options) {\n    const o = $.extend({}, Config.Defaults, options);\n    this.$trigger = o.trigger;\n    this.options = o;\n\n    this.wireEventHandlers();\n  }\n\n  wireEventHandlers() {\n    const { $trigger, options } = this;\n\n    $trigger.on('click', (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n      return false;\n    }).popover({\n      container: options.container,\n      content: $(options.target).find('> .container').html(),\n      template: options.template,\n      html: true,\n      placement: 'bottom',\n      title: 'More links',\n      trigger: 'click',\n    }).on('show.bs.popover', () => {\n      $trigger.data('previous-hash', window.location.hash);\n      changeLocationHash(options.target);\n    }).on('hide.bs.popover', () => {\n      if ($('.popover.megamenu-links').is(':visible')) {\n        if ($trigger.data('previous-hash') && $trigger.data('previous-hash') !== '#more-links') {\n          changeLocationHash($trigger.data('previous-hash'));\n        } else {\n          // Set us back to the first panel\n          changeLocationHash(`#${$('.jumbotron-carousel > article[id]:visible').first().attr('id')}`);\n        }\n      }\n    });\n\n    if ($trigger.is(':visible') && window.location.hash === options.target) {\n      $trigger.popover('show');\n    }\n\n    // Click away to dismiss\n    $('html').on('click.popoverDismiss', (e) => {\n      // if clicking anywhere other than the popover itself\n      if ($(e.target).closest('.popover').length === 0 && $(e.target).closest('.use-popover').length === 0) {\n        $trigger.popover('hide');\n      }\n    });\n  }\n}\n\n$.fn.moreLinksPopover = function initPlugin(o = {}) {\n  function attach(i, element) {\n    const $trigger = $(element);\n    const moreLinksPopover = new MoreLinksPopover($.extend({}, $trigger.data(), o, {\n      trigger: $trigger,\n    }));\n\n    $trigger.data('id7.more-links-popover', moreLinksPopover);\n  }\n\n  return this.each(attach);\n};\n\n$(() => {\n  if (Modernizr.flexbox) {\n    $('[data-toggle=\"id7:megamenu-popover\"]').moreLinksPopover();\n  }\n});\n"],"sourceRoot":""}